function getPercentValue(e,i){var t=e/i*100;return Math.round(t)}function isValidVotes(e,i){return!(!Number(e)||!Number(i))}function sortPeople(e){var i=e.filter(e=>e.isValid),t=e.filter(e=>!e.isValid);return i.sort((e,i)=>{const t=Number(e.positive)/(Number(e.positive)+Number(e.negative))*100,a=Number(i.positive)/(Number(i.positive)+Number(i.negative))*100;return t>a?-1:t<a?1:0}),t.sort((e,i)=>{const t=Number(e.positive)/(Number(e.positive)+Number(e.negative))*100,a=Number(i.positive)/(Number(i.positive)+Number(i.negative))*100;return t>a?-1:t<a?1:0}),t.map((e,t)=>{i.push(e)}),i.forEach((e,i)=>{e.rankIdx=i+1}),i}function createItemListTemplate(e){var i=[];return e.forEach(e=>{var t="";t=e.isValid?`<li class="ranking-list-item" tabindex="0" aria-label="Posição ${e.rankIdx} - Participante ${e.name}, ${e.desc}. ${e.percentPos} gostam e ${e.percentNeg} não gostam desse participante"><div class="item-profile-container"><div style="background-image:url('${e.pic}')" class="item-profile-img" aria-label="Foto do participante ${e.name}"></div><span class="item-profile-idx">${e.rankIdx}</span></div><div class="item-text"><p class="item-text-name">${e.name}</p><p class="item-text-description">${e.desc}</p></div><div class="item-tooltip"><div class="item-tooltip-header"><div class="item-tooltip-header-positive"><p>GOSTAM</p></div><div class="item-tooltip-header-negative"><p>NÃO GOSTAM</p></div></div><div class="item-tooltip-percent"><div class="item-tooltip-percent-positive"><p aria-label='${e.percentPos} gostam de ${e.name}'>${e.percentPos}</p></div><div class="item-tooltip-percent-negative"><p aria-label='${e.percentNeg} não gostam de ${e.name}'>${e.percentNeg}</p></div></div></div></li>`:`<li class="ranking-list-item" tabindex="0" aria-label="Posição ${e.rankIdx} - Participante ${e.name}, ${e.desc}. Porcentagem de votos não informados"><div class="item-profile-container"><div style="background-image:url('${e.pic}')" class="item-profile-img" aria-label="Foto do participante ${e.name}"></div><span class="item-profile-idx">${e.rankIdx}</span></div><div class="item-text"><p class="item-text-name">${e.name}</p><p class="item-text-description">${e.desc}</p></div><div class="item-tooltip"><div class="item-tooltip-header"><div class="item-tooltip-header-positive"><p>GOSTAM</p></div><div class="item-tooltip-header-negative"><p>NÃO GOSTAM</p></div></div><div class="item-tooltip-percent invalid-percent"><div class="item-tooltip-percent-positive"><p aria-label='Porcentagem de likes não informada'>Não<br>informado</p></div><div class="item-tooltip-percent-negative"><p aria-label='Porcentagem de dislikes não informada'>Não<br>informado</p></div></div></div></li>`,i.push(t)}),i}function loadJson(e){var i=new XMLHttpRequest;i.open("GET","https://raw.githubusercontent.com/wkhira/frontend-test/master/src/fazenda.json"),i.responseType="json",i.send(),i.onload=function(){var t=i.response;e(t)}}function buildList(){var e=[];loadJson((function(i){i.data.forEach(i=>{var t=isValidVotes(i.positive,i.negative),a={rankIdx:null,name:i.name,desc:"Cracrete n&ordm;1"==i.description?"Chacrete n&ordm;1":i.description,pic:i.picture,positive:t?Number(i.positive):null,negative:t?Number(i.negative):null,percentPos:t?getPercentValue(Number(i.positive),Number(i.positive)+Number(i.negative))+"%":null,percentNeg:t?getPercentValue(Number(i.negative),Number(i.positive)+Number(i.negative))+"%":null,isValid:t};e.push(a)});var t=createItemListTemplate(sortPeople(e)),a=$(".ranking-list");t.forEach(e=>{a.append(e)})}))}$((function(){buildList()}));